---
title: "Tooltip of TnT Tracks"
author: "Jialin Ma"
date: "June 22, 2017"
output:
    rmarkdown::html_document:
        toc: true
        toc_float: true
        theme: flatly
---


Here are some examples using tooltips with TnT.

To install the version of package that builds this document, run

```{r, eval=FALSE}
install_github("marlin-na/TnT", ref = "eb5c0d16a5a85b053f51db76f0bccfa11b66506f")
```

```{r}
suppressPackageStartupMessages({
    library(TnT)
    library(GenomicFeatures)
})
set.seed(42)
```


# Sample Data

## CPG Islands of Human Genome (hg19)


Download ranges of CPG Islands from annotationhub.


```{r}
library(AnnotationHub)
cpgislands <- AnnotationHub()[['AH5086']]
cpgislands
```


# Tooltips in Track

Tooltips can be given as a data frame with the same length of rows as the track data,
by default, it is constructed from the "meta-column" of GRanges, i.e. `mcols(gr)`.


```{r}
blockTrack <- BlockTrack(cpgislands, color = "blue")
```

It can also be accessed and be modified after the track is constructed, for example

```{r}
head(tooltip(blockTrack))
tooltip(blockTrack) <- as.data.frame(cpgislands)
head(tooltip(blockTrack))
```

Then we can view the tooltip in browser, try to click on the range.

```{r}
TnTBoard(list(blockTrack), viewrange = GRanges("chrY", IRanges(500000, 1000000)))
```

## Subsections of Tooltip Table

Columns that have empty columns will be regarded as subsection titles, for example:

```{r}
df <- as.data.frame(cpgislands)
tooltip(blockTrack) <- cbind(
    data.frame(Location = ""),
    df[c("seqnames", "start", "end", "strand")],
    data.frame(Description = ""),
    df[c("name")]
)
head(tooltip(blockTrack))
```

```{r}
TnTBoard(list(blockTrack), viewrange = GRanges("chrY", IRanges(500000, 1000000)))
```


# SessionInfo

```{r}
sessionInfo()
```




