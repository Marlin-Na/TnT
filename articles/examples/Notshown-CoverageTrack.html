<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coverage Track â€¢ TnT</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><meta property="og:title" content="Coverage Track">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">TnT</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/introduction.html">Introduction to TnT</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/examples/index.html">Index</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Track Types</li>
    <li>
      <a href="../../articles/examples/tracktype-BlockTrack.html">BlockTrack</a>
    </li>
    <li>
      <a href="../../articles/examples/tracktype-PinTrack.html">PinTrack</a>
    </li>
    <li>
      <a href="../../articles/examples/tracktype-LineTrack-AreaTrack.html">LineTrack and AreaTrack</a>
    </li>
    <li>
      <a href="../../articles/examples/tracktype-VlineTrack.html">VlineTrack</a>
    </li>
    <li>
      <a href="../../articles/examples/tracktype-GeneTrack.html">GeneTrack and FeatureTrack</a>
    </li>
    <li>
      <a href="../../articles/examples/tracktype-TxTrack.html">TxTrack and GroupFeatureTrack</a>
    </li>
    <li>
      <a href="../../articles/examples/track-CompositeTrack.html">CompositeTrack</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/examples/track-colors.html">Feature Colors</a>
    </li>
    <li>
      <a href="../../articles/examples/track-tooltip-display.html">Tooltip display</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/marlin-na/TnT">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="Notshown-CoverageTrack_files/htmlwidgets-1.2/htmlwidgets.js"></script><script src="Notshown-CoverageTrack_files/d3-3.5.17/d3.v3.min.js"></script><link href="Notshown-CoverageTrack_files/tnt.genome-0.1.6/tnt.genome.css" rel="stylesheet">
<script src="Notshown-CoverageTrack_files/tnt.genome-0.1.6/tnt.genome.min.js"></script><link href="Notshown-CoverageTrack_files/tnt.tooltip-0.2.0/tnt.tooltip.css" rel="stylesheet">
<script src="Notshown-CoverageTrack_files/tnt.tooltip-0.2.0/tnt.tooltip.js"></script><script src="Notshown-CoverageTrack_files/tnt.r-0.0.1/tnt.r.js"></script><script src="Notshown-CoverageTrack_files/trackWidget-binding-1.3.1/trackWidget.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Coverage Track</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Marlin-Na/TnT/blob/master/vignettes/examples/Notshown-CoverageTrack.Rmd"><code>vignettes/examples/Notshown-CoverageTrack.Rmd</code></a></small>
      <div class="hidden name"><code>Notshown-CoverageTrack.Rmd</code></div>

    </div>

    
    
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">expose_all &lt;-<span class="st"> </span><span class="cf">function</span> (package) {
    attachname &lt;-<span class="st"> </span><span class="kw">paste0</span>(package, <span class="st">"_all"</span>)
    <span class="cf">while</span> (attachname <span class="op">%in%</span><span class="st"> </span><span class="kw">search</span>()) <span class="kw">detach</span>(attachname, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)
    pkgns &lt;-<span class="st"> </span><span class="kw">loadNamespace</span>(package)
    <span class="kw">attach</span>(pkgns, <span class="dt">name =</span> attachname)
    <span class="kw">invisible</span>(pkgns)
}
<span class="kw">suppressMessages</span>(<span class="kw">expose_all</span>(<span class="st">"TnT"</span>))</code></pre></div>
<div id="coverage-feature" class="section level2">
<h2 class="hasAnchor">
<a href="#coverage-feature" class="anchor"></a>Coverage Feature</h2>
<p><a href="https://github.com/tntvis/tnt.board/blob/master/examples/dynamic_ranges/ranges.js" class="uri">https://github.com/tntvis/tnt.board/blob/master/examples/dynamic_ranges/ranges.js</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/trackWidget.html">trackWidget</a></span>(<span class="st">'</span>
<span class="st">var data = [</span>
<span class="st">    {start:1,end:10,height:0.840188},</span>
<span class="st">    {start:11,end:20,height:0.394383},</span>
<span class="st">    {start:21,end:30,height:0.783099},</span>
<span class="st">    {start:31,end:40,height:0.79844},</span>
<span class="st">    {start:41,end:50,height:0.911647},</span>
<span class="st">    {start:51,end:60,height:0.197551},</span>
<span class="st">    {start:61,end:70,height:0.335223},</span>
<span class="st">    {start:71,end:80,height:0.76823},</span>
<span class="st">    {start:81,end:90,height:0.277775},</span>
<span class="st">    {start:91,end:100,height:0.55397},</span>
<span class="st">    {start:101,end:110,height:0.477397},</span>
<span class="st">    {start:111,end:120,height:0.628871},</span>
<span class="st">    {start:121,end:130,height:0.364784},</span>
<span class="st">    {start:131,end:140,height:0.513401},</span>
<span class="st">    {start:141,end:150,height:0.95223},</span>
<span class="st">    {start:151,end:160,height:0.916195},</span>
<span class="st">    {start:161,end:170,height:0.635712},</span>
<span class="st">    {start:171,end:180,height:0.717297},</span>
<span class="st">    {start:181,end:190,height:0.141603},</span>
<span class="st">    {start:191,end:200,height:0.606969},</span>
<span class="st">    {start:201,end:210,height:0.0163006},</span>
<span class="st">    {start:211,end:220,height:0.242887},</span>
<span class="st">    {start:221,end:230,height:0.137232},</span>
<span class="st">    {start:231,end:240,height:0.804177},</span>
<span class="st">    {start:241,end:250,height:0.156679},</span>
<span class="st">    {start:251,end:260,height:0.400944},</span>
<span class="st">    {start:261,end:270,height:0.12979},</span>
<span class="st">    {start:271,end:280,height:0.108809},</span>
<span class="st">    {start:281,end:290,height:0.998925},</span>
<span class="st">    {start:291,end:300,height:0.218257},</span>
<span class="st">    {start:301,end:310,height:0.512932},</span>
<span class="st">    {start:311,end:320,height:0.839112},</span>
<span class="st">    {start:321,end:330,height:0.61264},</span>
<span class="st">    {start:331,end:340,height:0.296032},</span>
<span class="st">    {start:341,end:350,height:0.637552},</span>
<span class="st">    {start:351,end:360,height:0.524287},</span>
<span class="st">    {start:361,end:370,height:0.493583},</span>
<span class="st">    {start:371,end:380,height:0.972775},</span>
<span class="st">    {start:381,end:390,height:0.292517},</span>
<span class="st">    {start:391,end:400,height:0.771358},</span>
<span class="st">    {start:401,end:410,height:0.526745},</span>
<span class="st">    {start:411,end:420,height:0.769914},</span>
<span class="st">    {start:421,end:430,height:0.400229},</span>
<span class="st">    {start:431,end:440,height:0.891529},</span>
<span class="st">    {start:441,end:450,height:0.283315},</span>
<span class="st">    {start:451,end:460,height:0.352458},</span>
<span class="st">    {start:461,end:470,height:0.807725},</span>
<span class="st">    {start:471,end:480,height:0.919026},</span>
<span class="st">    {start:481,end:490,height:0.0697553},</span>
<span class="st">    {start:491,end:500,height:0.949327},</span>
<span class="st">    {start:501,end:510,height:0.525995},</span>
<span class="st">    {start:511,end:520,height:0.0860558},</span>
<span class="st">    {start:521,end:530,height:0.192214},</span>
<span class="st">    {start:531,end:540,height:0.663227},</span>
<span class="st">    {start:541,end:550,height:0.890233},</span>
<span class="st">    {start:551,end:560,height:0.348893},</span>
<span class="st">    {start:561,end:570,height:0.0641713},</span>
<span class="st">    {start:571,end:580,height:0.020023},</span>
<span class="st">    {start:581,end:590,height:0.457702},</span>
<span class="st">    {start:591,end:600,height:0.0630958},</span>
<span class="st">    {start:601,end:610,height:0.23828},</span>
<span class="st">    {start:611,end:620,height:0.970634},</span>
<span class="st">    {start:621,end:630,height:0.902208},</span>
<span class="st">    {start:631,end:640,height:0.85092},</span>
<span class="st">    {start:641,end:650,height:0.266666},</span>
<span class="st">    {start:651,end:660,height:0.53976},</span>
<span class="st">    {start:661,end:670,height:0.375207},</span>
<span class="st">    {start:671,end:680,height:0.760249},</span>
<span class="st">    {start:681,end:690,height:0.512535},</span>
<span class="st">    {start:691,end:700,height:0.667724},</span>
<span class="st">    {start:701,end:710,height:0.531606},</span>
<span class="st">    {start:711,end:720,height:0.0392803},</span>
<span class="st">    {start:721,end:730,height:0.437638},</span>
<span class="st">    {start:731,end:740,height:0.931835},</span>
<span class="st">    {start:741,end:750,height:0.93081},</span>
<span class="st">    {start:751,end:760,height:0.720952},</span>
<span class="st">    {start:761,end:770,height:0.284293},</span>
<span class="st">    {start:771,end:780,height:0.738534},</span>
<span class="st">    {start:781,end:790,height:0.639979},</span>
<span class="st">    {start:791,end:800,height:0.354049},</span>
<span class="st">    {start:801,end:810,height:0.687861},</span>
<span class="st">    {start:811,end:820,height:0.165974},</span>
<span class="st">    {start:821,end:830,height:0.440105},</span>
<span class="st">    {start:831,end:840,height:0.880075},</span>
<span class="st">    {start:841,end:850,height:0.829201},</span>
<span class="st">    {start:851,end:860,height:0.330337},</span>
<span class="st">    {start:861,end:870,height:0.228968},</span>
<span class="st">    {start:871,end:880,height:0.893372},</span>
<span class="st">    {start:881,end:890,height:0.35036},</span>
<span class="st">    {start:891,end:900,height:0.68667},</span>
<span class="st">    {start:901,end:910,height:0.956468},</span>
<span class="st">    {start:911,end:920,height:0.58864},</span>
<span class="st">    {start:921,end:930,height:0.657304},</span>
<span class="st">    {start:931,end:940,height:0.858676},</span>
<span class="st">    {start:941,end:950,height:0.43956},</span>
<span class="st">    {start:951,end:960,height:0.92397},</span>
<span class="st">    {start:961,end:970,height:0.398437},</span>
<span class="st">    {start:971,end:980,height:0.814767},</span>
<span class="st">    {start:981,end:990,height:0.684219},</span>
<span class="st">    {start:991,end:1000,height:0.910972}</span>
<span class="st">];</span>


<span class="st">// The coverage custom feature</span>
<span class="st">var coverageFeature = tnt.board.track.feature()</span>
<span class="st">    .index(function(d) {</span>
<span class="st">        return d.start + "-" + d.end;</span>
<span class="st">    });</span>

<span class="st">var coverageFeatureInverse = tnt.board.track.feature()</span>
<span class="st">    .index(function(d) {</span>
<span class="st">        return d.start + "-" + d.end;</span>
<span class="st">    });</span>


<span class="st">// Create new elements</span>
<span class="st">coverageFeature.create(function (el) {</span>
<span class="st">    var xScale = coverageFeature.scale();</span>
<span class="st">    var track = this;</span>
<span class="st">    var y = track.height();</span>

<span class="st">    var barScale = d3.scale.linear()</span>
<span class="st">        .domain([0, 1])</span>
<span class="st">        .range([0, y]);</span>
<span class="st">    var colorScale = d3.scale.linear()</span>
<span class="st">        .domain([0, 1])</span>
<span class="st">        .range(["#5ba633", "#027be3"]);</span>

<span class="st">    var g = el</span>
<span class="st">        .append("g");</span>

<span class="st">    g.append("rect")</span>
<span class="st">        .attr("x", function (d) {</span>
<span class="st">            return xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("y", function (d) {</span>
<span class="st">            return y - barScale(d.height);</span>
<span class="st">            //return 0;</span>
<span class="st">        })</span>
<span class="st">        .attr("width", function (d) {</span>
<span class="st">            return xScale(d.end) - xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("height", function (d) {</span>
<span class="st">            return barScale(d.height);</span>
<span class="st">        })</span>
<span class="st">        .style("fill", function (d) {</span>
<span class="st">            return colorScale(d.height);</span>
<span class="st">        })</span>
<span class="st">});</span>

<span class="st">coverageFeatureInverse.create(function (el) {</span>
<span class="st">    var xScale = coverageFeature.scale();</span>
<span class="st">    var track = this;</span>
<span class="st">    var y = track.height();</span>

<span class="st">    var barScale = d3.scale.linear()</span>
<span class="st">        .domain([0, 1])</span>
<span class="st">        .range([0, y]);</span>
<span class="st">    var colorScale = d3.scale.linear()</span>
<span class="st">        .domain([0, 1])</span>
<span class="st">        .range(["#5ba633", "#027be3"]);</span>

<span class="st">    var g = el</span>
<span class="st">        .append("g");</span>

<span class="st">    g.append("rect")</span>
<span class="st">        .attr("x", function (d) {</span>
<span class="st">            return xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("y", function (d) {</span>
<span class="st">            //return y - barScale(d.height);</span>
<span class="st">            return 0;</span>
<span class="st">        })</span>
<span class="st">        .attr("width", function (d) {</span>
<span class="st">            return xScale(d.end) - xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("height", function (d) {</span>
<span class="st">            return barScale(d.height);</span>
<span class="st">        })</span>
<span class="st">        .style("fill", function (d) {</span>
<span class="st">            return colorScale(d.height);</span>
<span class="st">        })</span>
<span class="st">});</span>

<span class="st">coverageFeature.move(function (el) {</span>
<span class="st">    var xScale = coverageFeature.scale();</span>

<span class="st">    el.select("g")</span>
<span class="st">        .select("rect")</span>
<span class="st">        .attr("x", function (d) {</span>
<span class="st">            return xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("width", function (d) {</span>
<span class="st">            return xScale(d.end) - xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">});</span>

<span class="st">coverageFeatureInverse.move(function (el) {</span>
<span class="st">    var xScale = coverageFeature.scale();</span>

<span class="st">    el.select("g")</span>
<span class="st">        .select("rect")</span>
<span class="st">        .attr("x", function (d) {</span>
<span class="st">            return xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("width", function (d) {</span>
<span class="st">            return xScale(d.end) - xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">});</span>

<span class="st">// The board</span>
<span class="st">var myBoard = tnt.board().from(20).to(500).max(1000);</span>

<span class="st">// The location track</span>
<span class="st">var location_track = tnt.board.track()</span>
<span class="st">    .height(20)</span>
<span class="st">    .color("white")</span>
<span class="st">    .display(tnt.board.track.feature.axis()</span>
<span class="st">        .orientation("top")</span>
<span class="st">    );</span>

<span class="st">// The ranges track</span>
<span class="st">var ranges_track = tnt.board.track()</span>
<span class="st">    .label("coverage plot")</span>
<span class="st">    .height(80)</span>
<span class="st">    .color("white")</span>
<span class="st">    .data (tnt.board.track.data.sync()</span>
<span class="st">        .retriever (function (loc) {</span>
<span class="st">            // Return only the range on display</span>
<span class="st">            var rangeData = data.filter(function (d) {</span>
<span class="st">                return (d.start &gt; loc.from) &amp;&amp; (d.end &lt; loc.to);</span>
<span class="st">            });</span>
<span class="st">            // if necessary group or edit the number of elements to show</span>
<span class="st">            // rangeData = getNewRange(data, loc)</span>
<span class="st">            return rangeData;</span>
<span class="st">        })</span>
<span class="st">    )</span>
<span class="st">    .display(coverageFeature);</span>

<span class="st">var ranges_track2 = tnt.board.track()</span>
<span class="st">    .label("coverage plot")</span>
<span class="st">    .height(80)</span>
<span class="st">    .color("white")</span>
<span class="st">    .data (tnt.board.track.data.sync()</span>
<span class="st">        .retriever (function (loc) {</span>
<span class="st">            // Return only the range on display</span>
<span class="st">            var rangeData = data.filter(function (d) {</span>
<span class="st">                return (d.start &gt; loc.from) &amp;&amp; (d.end &lt; loc.to);</span>
<span class="st">            });</span>
<span class="st">            // if necessary group or edit the number of elements to show</span>
<span class="st">            // rangeData = getNewRange(data, loc)</span>
<span class="st">            return rangeData;</span>
<span class="st">        })</span>
<span class="st">    )</span>
<span class="st">    .display(coverageFeatureInverse);</span>

<span class="st">// Add the tracks and start</span>
<span class="st">myBoard</span>
<span class="st">    .add_track(location_track)</span>
<span class="st">    .add_track(ranges_track2)</span>
<span class="st">    .add_track(ranges_track);</span>

<span class="st">myBoard</span>

<span class="st">//myBoard(document.getElementById("mydiv"));</span>
<span class="st">//myBoard.start();</span>

<span class="st">'</span>)</code></pre></div>
<pre><code>## Warning in readLines(con): incomplete final line found on '/home/jialin/R/
## x86_64-suse-linux-gnu-library/3.4/TnT/htmlwidgets/trackWidget.yaml'</code></pre>
<div id="htmlwidget-53f82da93f8376d4e278" style="width:100%;height:auto;" class="trackWidget html-widget"></div>
<script type="application/json" data-for="htmlwidget-53f82da93f8376d4e278">{"x":{"tntdef":"\nvar data = [\n    {start:1,end:10,height:0.840188},\n    {start:11,end:20,height:0.394383},\n    {start:21,end:30,height:0.783099},\n    {start:31,end:40,height:0.79844},\n    {start:41,end:50,height:0.911647},\n    {start:51,end:60,height:0.197551},\n    {start:61,end:70,height:0.335223},\n    {start:71,end:80,height:0.76823},\n    {start:81,end:90,height:0.277775},\n    {start:91,end:100,height:0.55397},\n    {start:101,end:110,height:0.477397},\n    {start:111,end:120,height:0.628871},\n    {start:121,end:130,height:0.364784},\n    {start:131,end:140,height:0.513401},\n    {start:141,end:150,height:0.95223},\n    {start:151,end:160,height:0.916195},\n    {start:161,end:170,height:0.635712},\n    {start:171,end:180,height:0.717297},\n    {start:181,end:190,height:0.141603},\n    {start:191,end:200,height:0.606969},\n    {start:201,end:210,height:0.0163006},\n    {start:211,end:220,height:0.242887},\n    {start:221,end:230,height:0.137232},\n    {start:231,end:240,height:0.804177},\n    {start:241,end:250,height:0.156679},\n    {start:251,end:260,height:0.400944},\n    {start:261,end:270,height:0.12979},\n    {start:271,end:280,height:0.108809},\n    {start:281,end:290,height:0.998925},\n    {start:291,end:300,height:0.218257},\n    {start:301,end:310,height:0.512932},\n    {start:311,end:320,height:0.839112},\n    {start:321,end:330,height:0.61264},\n    {start:331,end:340,height:0.296032},\n    {start:341,end:350,height:0.637552},\n    {start:351,end:360,height:0.524287},\n    {start:361,end:370,height:0.493583},\n    {start:371,end:380,height:0.972775},\n    {start:381,end:390,height:0.292517},\n    {start:391,end:400,height:0.771358},\n    {start:401,end:410,height:0.526745},\n    {start:411,end:420,height:0.769914},\n    {start:421,end:430,height:0.400229},\n    {start:431,end:440,height:0.891529},\n    {start:441,end:450,height:0.283315},\n    {start:451,end:460,height:0.352458},\n    {start:461,end:470,height:0.807725},\n    {start:471,end:480,height:0.919026},\n    {start:481,end:490,height:0.0697553},\n    {start:491,end:500,height:0.949327},\n    {start:501,end:510,height:0.525995},\n    {start:511,end:520,height:0.0860558},\n    {start:521,end:530,height:0.192214},\n    {start:531,end:540,height:0.663227},\n    {start:541,end:550,height:0.890233},\n    {start:551,end:560,height:0.348893},\n    {start:561,end:570,height:0.0641713},\n    {start:571,end:580,height:0.020023},\n    {start:581,end:590,height:0.457702},\n    {start:591,end:600,height:0.0630958},\n    {start:601,end:610,height:0.23828},\n    {start:611,end:620,height:0.970634},\n    {start:621,end:630,height:0.902208},\n    {start:631,end:640,height:0.85092},\n    {start:641,end:650,height:0.266666},\n    {start:651,end:660,height:0.53976},\n    {start:661,end:670,height:0.375207},\n    {start:671,end:680,height:0.760249},\n    {start:681,end:690,height:0.512535},\n    {start:691,end:700,height:0.667724},\n    {start:701,end:710,height:0.531606},\n    {start:711,end:720,height:0.0392803},\n    {start:721,end:730,height:0.437638},\n    {start:731,end:740,height:0.931835},\n    {start:741,end:750,height:0.93081},\n    {start:751,end:760,height:0.720952},\n    {start:761,end:770,height:0.284293},\n    {start:771,end:780,height:0.738534},\n    {start:781,end:790,height:0.639979},\n    {start:791,end:800,height:0.354049},\n    {start:801,end:810,height:0.687861},\n    {start:811,end:820,height:0.165974},\n    {start:821,end:830,height:0.440105},\n    {start:831,end:840,height:0.880075},\n    {start:841,end:850,height:0.829201},\n    {start:851,end:860,height:0.330337},\n    {start:861,end:870,height:0.228968},\n    {start:871,end:880,height:0.893372},\n    {start:881,end:890,height:0.35036},\n    {start:891,end:900,height:0.68667},\n    {start:901,end:910,height:0.956468},\n    {start:911,end:920,height:0.58864},\n    {start:921,end:930,height:0.657304},\n    {start:931,end:940,height:0.858676},\n    {start:941,end:950,height:0.43956},\n    {start:951,end:960,height:0.92397},\n    {start:961,end:970,height:0.398437},\n    {start:971,end:980,height:0.814767},\n    {start:981,end:990,height:0.684219},\n    {start:991,end:1000,height:0.910972}\n];\n\n\n// The coverage custom feature\nvar coverageFeature = tnt.board.track.feature()\n    .index(function(d) {\n        return d.start + \"-\" + d.end;\n    });\n\nvar coverageFeatureInverse = tnt.board.track.feature()\n    .index(function(d) {\n        return d.start + \"-\" + d.end;\n    });\n\n\n// Create new elements\ncoverageFeature.create(function (el) {\n    var xScale = coverageFeature.scale();\n    var track = this;\n    var y = track.height();\n\n    var barScale = d3.scale.linear()\n        .domain([0, 1])\n        .range([0, y]);\n    var colorScale = d3.scale.linear()\n        .domain([0, 1])\n        .range([\"#5ba633\", \"#027be3\"]);\n\n    var g = el\n        .append(\"g\");\n\n    g.append(\"rect\")\n        .attr(\"x\", function (d) {\n            return xScale(d.start);\n        })\n        .attr(\"y\", function (d) {\n            return y - barScale(d.height);\n            //return 0;\n        })\n        .attr(\"width\", function (d) {\n            return xScale(d.end) - xScale(d.start);\n        })\n        .attr(\"height\", function (d) {\n            return barScale(d.height);\n        })\n        .style(\"fill\", function (d) {\n            return colorScale(d.height);\n        })\n});\n\ncoverageFeatureInverse.create(function (el) {\n    var xScale = coverageFeature.scale();\n    var track = this;\n    var y = track.height();\n\n    var barScale = d3.scale.linear()\n        .domain([0, 1])\n        .range([0, y]);\n    var colorScale = d3.scale.linear()\n        .domain([0, 1])\n        .range([\"#5ba633\", \"#027be3\"]);\n\n    var g = el\n        .append(\"g\");\n\n    g.append(\"rect\")\n        .attr(\"x\", function (d) {\n            return xScale(d.start);\n        })\n        .attr(\"y\", function (d) {\n            //return y - barScale(d.height);\n            return 0;\n        })\n        .attr(\"width\", function (d) {\n            return xScale(d.end) - xScale(d.start);\n        })\n        .attr(\"height\", function (d) {\n            return barScale(d.height);\n        })\n        .style(\"fill\", function (d) {\n            return colorScale(d.height);\n        })\n});\n\ncoverageFeature.move(function (el) {\n    var xScale = coverageFeature.scale();\n\n    el.select(\"g\")\n        .select(\"rect\")\n        .attr(\"x\", function (d) {\n            return xScale(d.start);\n        })\n        .attr(\"width\", function (d) {\n            return xScale(d.end) - xScale(d.start);\n        })\n});\n\ncoverageFeatureInverse.move(function (el) {\n    var xScale = coverageFeature.scale();\n\n    el.select(\"g\")\n        .select(\"rect\")\n        .attr(\"x\", function (d) {\n            return xScale(d.start);\n        })\n        .attr(\"width\", function (d) {\n            return xScale(d.end) - xScale(d.start);\n        })\n});\n\n// The board\nvar myBoard = tnt.board().from(20).to(500).max(1000);\n\n// The location track\nvar location_track = tnt.board.track()\n    .height(20)\n    .color(\"white\")\n    .display(tnt.board.track.feature.axis()\n        .orientation(\"top\")\n    );\n\n// The ranges track\nvar ranges_track = tnt.board.track()\n    .label(\"coverage plot\")\n    .height(80)\n    .color(\"white\")\n    .data (tnt.board.track.data.sync()\n        .retriever (function (loc) {\n            // Return only the range on display\n            var rangeData = data.filter(function (d) {\n                return (d.start > loc.from) && (d.end < loc.to);\n            });\n            // if necessary group or edit the number of elements to show\n            // rangeData = getNewRange(data, loc)\n            return rangeData;\n        })\n    )\n    .display(coverageFeature);\n\nvar ranges_track2 = tnt.board.track()\n    .label(\"coverage plot\")\n    .height(80)\n    .color(\"white\")\n    .data (tnt.board.track.data.sync()\n        .retriever (function (loc) {\n            // Return only the range on display\n            var rangeData = data.filter(function (d) {\n                return (d.start > loc.from) && (d.end < loc.to);\n            });\n            // if necessary group or edit the number of elements to show\n            // rangeData = getNewRange(data, loc)\n            return rangeData;\n        })\n    )\n    .display(coverageFeatureInverse);\n\n// Add the tracks and start\nmyBoard\n    .add_track(location_track)\n    .add_track(ranges_track2)\n    .add_track(ranges_track);\n\nmyBoard\n\n//myBoard(document.getElementById(\"mydiv\"));\n//myBoard.start();\n\n"},"evals":[],"jsHooks":[]}</script><p><br><br></p>
</div>
<div id="section" class="section level2">
<h2 class="hasAnchor">
<a href="#section" class="anchor"></a>2</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/trackWidget.html">trackWidget</a></span>(<span class="st">'</span>
<span class="st">var data = [{start: 1, end: 1, height: 0.840188},</span>
<span class="st">    {start: 2, end: 2, height: 0.394383},</span>
<span class="st">    {start: 3, end: 3, height: 0.783099},</span>
<span class="st">    {start: 4, end: 4, height: 0.79844},</span>
<span class="st">    {start: 5, end: 5, height: 0.911647},</span>
<span class="st">    {start: 6, end: 6, height: 0.197551},</span>
<span class="st">    {start: 7, end: 7, height: 0.335223},</span>
<span class="st">    {start: 8, end: 8, height: 0.76823},</span>
<span class="st">    {start: 9, end: 9, height: 0.277775},</span>
<span class="st">    {start: 10, end: 10, height: 0.55397},</span>
<span class="st">    {start: 11, end: 11, height: 0.477397},</span>
<span class="st">    {start: 12, end: 12, height: 0.628871},</span>
<span class="st">    {start: 13, end: 13, height: 0.364784},</span>
<span class="st">    {start: 14, end: 14, height: 0.513401},</span>
<span class="st">    {start: 15, end: 15, height: 0.95223},</span>
<span class="st">    {start: 16, end: 16, height: 0.916195},</span>
<span class="st">    {start: 17, end: 17, height: 0.635712},</span>
<span class="st">    {start: 18, end: 18, height: 0.717297},</span>
<span class="st">    {start: 19, end: 19, height: 0.141603},</span>
<span class="st">    {start: 20, end: 20, height: 0.606969},</span>
<span class="st">    {start: 21, end: 21, height: 0.0163006},</span>
<span class="st">    {start: 22, end: 22, height: 0.242887},</span>
<span class="st">    {start: 23, end: 23, height: 0.137232},</span>
<span class="st">    {start: 24, end: 24, height: 0.804177},</span>
<span class="st">    {start: 25, end: 25, height: 0.156679},</span>
<span class="st">    {start: 26, end: 26, height: 0.400944},</span>
<span class="st">    {start: 27, end: 27, height: 0.12979},</span>
<span class="st">    {start: 28, end: 28, height: 0.108809},</span>
<span class="st">    {start: 29, end: 29, height: 0.998925},</span>
<span class="st">    {start: 30, end: 30, height: 0.218257},</span>
<span class="st">    {start: 31, end: 31, height: 0.512932},</span>
<span class="st">    {start: 32, end: 32, height: 0.839112},</span>
<span class="st">    {start: 33, end: 33, height: 0.61264},</span>
<span class="st">    {start: 34, end: 34, height: 0.296032},</span>
<span class="st">    {start: 35, end: 35, height: 0.637552},</span>
<span class="st">    {start: 36, end: 36, height: 0.524287},</span>
<span class="st">    {start: 37, end: 37, height: 0.493583},</span>
<span class="st">    {start: 38, end: 38, height: 0.972775},</span>
<span class="st">    {start: 39, end: 39, height: 0.292517},</span>
<span class="st">    {start: 40, end: 40, height: 0.771358},</span>
<span class="st">    {start: 41, end: 41, height: 0.526745},</span>
<span class="st">    {start: 42, end: 42, height: 0.769914},</span>
<span class="st">    {start: 43, end: 43, height: 0.400229},</span>
<span class="st">    {start: 44, end: 44, height: 0.891529},</span>
<span class="st">    {start: 45, end: 45, height: 0.283315},</span>
<span class="st">    {start: 46, end: 46, height: 0.352458},</span>
<span class="st">    {start: 47, end: 47, height: 0.807725},</span>
<span class="st">    {start: 48, end: 48, height: 0.919026},</span>
<span class="st">    {start: 49, end: 49, height: 0.0697553},</span>
<span class="st">    {start: 50, end: 50, height: 0.949327},</span>
<span class="st">    {start: 51, end: 51, height: 0.525995},</span>
<span class="st">    {start: 52, end: 52, height: 0.0860558},</span>
<span class="st">    {start: 53, end: 53, height: 0.192214},</span>
<span class="st">    {start: 54, end: 54, height: 0.663227},</span>
<span class="st">    {start: 55, end: 55, height: 0.890233},</span>
<span class="st">    {start: 56, end: 56, height: 0.348893},</span>
<span class="st">    {start: 57, end: 57, height: 0.0641713},</span>
<span class="st">    {start: 58, end: 58, height: 0.020023},</span>
<span class="st">    {start: 59, end: 59, height: 0.457702},</span>
<span class="st">    {start: 60, end: 60, height: 0.0630958},</span>
<span class="st">    {start: 61, end: 61, height: 0.23828},</span>
<span class="st">    {start: 62, end: 62, height: 0.970634},</span>
<span class="st">    {start: 63, end: 63, height: 0.902208},</span>
<span class="st">    {start: 64, end: 64, height: 0.85092},</span>
<span class="st">    {start: 65, end: 65, height: 0.266666},</span>
<span class="st">    {start: 66, end: 66, height: 0.53976},</span>
<span class="st">    {start: 67, end: 67, height: 0.375207},</span>
<span class="st">    {start: 68, end: 68, height: 0.760249},</span>
<span class="st">    {start: 69, end: 69, height: 0.512535},</span>
<span class="st">    {start: 70, end: 70, height: 0.667724},</span>
<span class="st">    {start: 71, end: 71, height: 0.531606},</span>
<span class="st">    {start: 72, end: 72, height: 0.0392803},</span>
<span class="st">    {start: 73, end: 73, height: 0.437638},</span>
<span class="st">    {start: 74, end: 74, height: 0.931835},</span>
<span class="st">    {start: 75, end: 75, height: 0.93081},</span>
<span class="st">    {start: 76, end: 76, height: 0.720952},</span>
<span class="st">    {start: 77, end: 77, height: 0.284293},</span>
<span class="st">    {start: 78, end: 78, height: 0.738534},</span>
<span class="st">    {start: 79, end: 79, height: 0.639979},</span>
<span class="st">    {start: 80, end: 80, height: 0.354049},</span>
<span class="st">    {start: 81, end: 81, height: 0.687861},</span>
<span class="st">    {start: 82, end: 82, height: 0.165974},</span>
<span class="st">    {start: 83, end: 83, height: 0.440105},</span>
<span class="st">    {start: 84, end: 84, height: 0.880075},</span>
<span class="st">    {start: 85, end: 85, height: 0.829201},</span>
<span class="st">    {start: 86, end: 86, height: 0.330337},</span>
<span class="st">    {start: 87, end: 87, height: 0.228968},</span>
<span class="st">    {start: 88, end: 88, height: 0.893372},</span>
<span class="st">    {start: 89, end: 89, height: 0.35036},</span>
<span class="st">    {start: 90, end: 90, height: 0.68667},</span>
<span class="st">    {start: 91, end: 91, height: 0.956468},</span>
<span class="st">    {start: 92, end: 92, height: 0.58864},</span>
<span class="st">    {start: 93, end: 93, height: 0.657304},</span>
<span class="st">    {start: 94, end: 94, height: 0.858676},</span>
<span class="st">    {start: 95, end: 95, height: 0.43956},</span>
<span class="st">    {start: 96, end: 96, height: 0.92397},</span>
<span class="st">    {start: 97, end: 97, height: 0.398437},</span>
<span class="st">    {start: 98, end: 98, height: 0.814767},</span>
<span class="st">    {start: 99, end: 99, height: 0.684219},</span>
<span class="st">    {start: 901, end: 901, height: 0.31299},</span>
<span class="st">    {start: 902, end: 902, height: 0.105576},</span>
<span class="st">    {start: 903, end: 903, height: 0.888433},</span>
<span class="st">    {start: 904, end: 904, height: 0.102233},</span>
<span class="st">    {start: 905, end: 905, height: 0.479777},</span>
<span class="st">    {start: 906, end: 906, height: 0.270321},</span>
<span class="st">    {start: 907, end: 907, height: 0.199724},</span>
<span class="st">    {start: 908, end: 908, height: 0.287736},</span>
<span class="st">    {start: 909, end: 909, height: 0.657643},</span>
<span class="st">    {start: 910, end: 910, height: 0.947001},</span>
<span class="st">    {start: 911, end: 911, height: 0.221918},</span>
<span class="st">    {start: 912, end: 912, height: 0.506915},</span>
<span class="st">    {start: 913, end: 913, height: 0.778463},</span>
<span class="st">    {start: 914, end: 914, height: 0.936349},</span>
<span class="st">    {start: 915, end: 915, height: 0.142119},</span>
<span class="st">    {start: 916, end: 916, height: 0.294601},</span>
<span class="st">    {start: 917, end: 917, height: 0.561007},</span>
<span class="st">    {start: 918, end: 918, height: 0.64452},</span>
<span class="st">    {start: 919, end: 919, height: 0.873414},</span>
<span class="st">    {start: 920, end: 920, height: 0.232848},</span>
<span class="st">    {start: 921, end: 921, height: 0.673996},</span>
<span class="st">    {start: 922, end: 922, height: 0.629359},</span>
<span class="st">    {start: 923, end: 923, height: 0.832555},</span>
<span class="st">    {start: 924, end: 924, height: 0.812997},</span>
<span class="st">    {start: 925, end: 925, height: 0.773301},</span>
<span class="st">    {start: 926, end: 926, height: 0.0284525},</span>
<span class="st">    {start: 927, end: 927, height: 0.590407},</span>
<span class="st">    {start: 928, end: 928, height: 0.617582},</span>
<span class="st">    {start: 929, end: 929, height: 0.763764},</span>
<span class="st">    {start: 930, end: 930, height: 0.774432},</span>
<span class="st">    {start: 931, end: 931, height: 0.284289},</span>
<span class="st">    {start: 932, end: 932, height: 0.0767534},</span>
<span class="st">    {start: 933, end: 933, height: 0.880009},</span>
<span class="st">    {start: 934, end: 934, height: 0.172722},</span>
<span class="st">    {start: 935, end: 935, height: 0.178987},</span>
<span class="st">    {start: 936, end: 936, height: 0.359786},</span>
<span class="st">    {start: 937, end: 937, height: 0.443043},</span>
<span class="st">    {start: 938, end: 938, height: 0.37871},</span>
<span class="st">    {start: 939, end: 939, height: 0.647522},</span>
<span class="st">    {start: 940, end: 940, height: 0.100686},</span>
<span class="st">    {start: 941, end: 941, height: 0.325711},</span>
<span class="st">    {start: 942, end: 942, height: 0.86944},</span>
<span class="st">    {start: 943, end: 943, height: 0.6076},</span>
<span class="st">    {start: 944, end: 944, height: 0.104174},</span>
<span class="st">    {start: 945, end: 945, height: 0.805789},</span>
<span class="st">    {start: 946, end: 946, height: 0.749719},</span>
<span class="st">    {start: 947, end: 947, height: 0.398775},</span>
<span class="st">    {start: 948, end: 948, height: 0.366796},</span>
<span class="st">    {start: 949, end: 949, height: 0.394239},</span>
<span class="st">    {start: 950, end: 950, height: 0.272189},</span>
<span class="st">    {start: 951, end: 951, height: 0.599644},</span>
<span class="st">    {start: 952, end: 952, height: 0.0682348},</span>
<span class="st">    {start: 953, end: 953, height: 0.901549},</span>
<span class="st">    {start: 954, end: 954, height: 0.432199},</span>
<span class="st">    {start: 955, end: 955, height: 0.881232},</span>
<span class="st">    {start: 956, end: 956, height: 0.67485},</span>
<span class="st">    {start: 957, end: 957, height: 0.460652},</span>
<span class="st">    {start: 958, end: 958, height: 0.471639},</span>
<span class="st">    {start: 959, end: 959, height: 0.292432},</span>
<span class="st">    {start: 960, end: 960, height: 0.224415},</span>
<span class="st">    {start: 961, end: 961, height: 0.246071},</span>
<span class="st">    {start: 962, end: 962, height: 0.576721},</span>
<span class="st">    {start: 963, end: 963, height: 0.301169},</span>
<span class="st">    {start: 964, end: 964, height: 0.12608},</span>
<span class="st">    {start: 965, end: 965, height: 0.749443},</span>
<span class="st">    {start: 966, end: 966, height: 0.480156},</span>
<span class="st">    {start: 967, end: 967, height: 0.485866},</span>
<span class="st">    {start: 968, end: 968, height: 0.192486},</span>
<span class="st">    {start: 969, end: 969, height: 0.858866},</span>
<span class="st">    {start: 970, end: 970, height: 0.133388},</span>
<span class="st">    {start: 971, end: 971, height: 0.293171},</span>
<span class="st">    {start: 972, end: 972, height: 0.184577},</span>
<span class="st">    {start: 973, end: 973, height: 0.00282779},</span>
<span class="st">    {start: 974, end: 974, height: 0.900772},</span>
<span class="st">    {start: 975, end: 975, height: 0.288752},</span>
<span class="st">    {start: 976, end: 976, height: 0.808617},</span>
<span class="st">    {start: 977, end: 977, height: 0.650491},</span>
<span class="st">    {start: 978, end: 978, height: 0.687527},</span>
<span class="st">    {start: 979, end: 979, height: 0.175413},</span>
<span class="st">    {start: 980, end: 980, height: 0.0447295},</span>
<span class="st">    {start: 981, end: 981, height: 0.959716},</span>
<span class="st">    {start: 982, end: 982, height: 0.775058},</span>
<span class="st">    {start: 983, end: 983, height: 0.112964},</span>
<span class="st">    {start: 984, end: 984, height: 0.861265},</span>
<span class="st">    {start: 985, end: 985, height: 0.207257},</span>
<span class="st">    {start: 986, end: 986, height: 0.994196},</span>
<span class="st">    {start: 987, end: 987, height: 0.536115},</span>
<span class="st">    {start: 988, end: 988, height: 0.667908},</span>
<span class="st">    {start: 989, end: 989, height: 0.465835},</span>
<span class="st">    {start: 990, end: 990, height: 0.828546},</span>
<span class="st">    {start: 991, end: 991, height: 0.892324},</span>
<span class="st">    {start: 992, end: 992, height: 0.711906},</span>
<span class="st">    {start: 993, end: 993, height: 0.405267},</span>
<span class="st">    {start: 994, end: 994, height: 0.193493},</span>
<span class="st">    {start: 995, end: 995, height: 0.837986},</span>
<span class="st">    {start: 996, end: 996, height: 0.154711},</span>
<span class="st">    {start: 997, end: 997, height: 0.673648},</span>
<span class="st">    {start: 998, end: 998, height: 0.323852},</span>
<span class="st">    {start: 999, end: 999, height: 0.347196},</span>
<span class="st">    {start: 1000, end: 1000, height: 0.532514}</span>
<span class="st">];</span>

<span class="st">// The coverage custom feature</span>
<span class="st">var coverageFeature = tnt.board.track.feature()</span>
<span class="st">    .index(function(d) {</span>
<span class="st">        return d.start + "-" + d.end;</span>
<span class="st">    });</span>

<span class="st">// Create new elements</span>
<span class="st">coverageFeature.create(function (el) {</span>
<span class="st">    var xScale = coverageFeature.scale();</span>
<span class="st">    var track = this;</span>
<span class="st">    var y = track.height();</span>

<span class="st">    var barScale = d3.scale.linear()</span>
<span class="st">        .domain([0, 1])</span>
<span class="st">        .range([0, y]);</span>
<span class="st">    var colorScale = d3.scale.linear()</span>
<span class="st">        .domain([0, 1])</span>
<span class="st">        .range(["#5ba633", "#027be3"]);</span>

<span class="st">    var g = el</span>
<span class="st">        .append("g");</span>

<span class="st">    g.append("rect")</span>
<span class="st">        .attr("x", function (d) {</span>
<span class="st">            return xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("y", function (d) {</span>
<span class="st">            return y - barScale(d.height);</span>
<span class="st">        })</span>
<span class="st">        .attr("width", function (d) {</span>
<span class="st">            return xScale(d.end) - xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("height", function (d) {</span>
<span class="st">            return barScale(d.height);</span>
<span class="st">        })</span>
<span class="st">        .style("fill", function (d) {</span>
<span class="st">            return colorScale(d.height);</span>
<span class="st">        })</span>
<span class="st">});</span>

<span class="st">coverageFeature.move(function (el) {</span>
<span class="st">    var xScale = coverageFeature.scale();</span>

<span class="st">    el.select("g")</span>
<span class="st">        .select("rect")</span>
<span class="st">        .attr("x", function (d) {</span>
<span class="st">            return xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">        .attr("width", function (d) {</span>
<span class="st">            return xScale(d.end) - xScale(d.start);</span>
<span class="st">        })</span>
<span class="st">});</span>

<span class="st">function getHeightInStep(arr) {</span>
<span class="st">    // mean of the data in the subarray passed as argument</span>
<span class="st">    return d3.sum(arr, function (d) {</span>
<span class="st">        return d.height;</span>
<span class="st">    }) / arr.length;</span>
<span class="st">}</span>

<span class="st">function getRangedData(data, to, from, steps) {</span>
<span class="st">    var stepLength = (to - from) / steps;</span>
<span class="st">    var slice = [];</span>
<span class="st">    for (var i = from; i &lt; to; i += stepLength) {</span>
<span class="st">        slice.push({</span>
<span class="st">            start: i,</span>
<span class="st">            end: (i + stepLength),</span>
<span class="st">            height: getHeightInStep(data.slice(i, (i + stepLength)))</span>
<span class="st">        });</span>
<span class="st">    }</span>
<span class="st">    return slice;</span>
<span class="st">}</span>

<span class="st">// The board</span>
<span class="st">var myBoard = tnt.board()</span>
<span class="st">    .from(0)</span>
<span class="st">    .to(1000)</span>
<span class="st">    .max(1000)</span>
<span class="st">    .zoom_in(50)</span>
<span class="st">    .zoom_out(1000);</span>

<span class="st">// The location track</span>
<span class="st">var location_track = tnt.board.track()</span>
<span class="st">    .height(20)</span>
<span class="st">    .color("white")</span>
<span class="st">    .display(tnt.board.track.feature.axis()</span>
<span class="st">        .orientation("top")</span>
<span class="st">    );</span>

<span class="st">// The ranges track</span>
<span class="st">var ranges_track = tnt.board.track()</span>
<span class="st">    .label("coverage plot")</span>
<span class="st">    .height(80)</span>
<span class="st">    .color("white")</span>
<span class="st">    .data (tnt.board.track.data.sync()</span>
<span class="st">        .retriever (function (loc) {</span>
<span class="st">            // Return only the range on display</span>
<span class="st">            // Keep a constant same number of steps (bars) on view</span>
<span class="st">            return getRangedData(data, loc.to, loc.from, 50);</span>
<span class="st">        })</span>
<span class="st">    )</span>
<span class="st">    .display(coverageFeature);</span>

<span class="st">// Add the tracks and start</span>
<span class="st">myBoard</span>
<span class="st">    .add_track(location_track)</span>
<span class="st">    .add_track(ranges_track);</span>

<span class="st">myBoard;</span>
<span class="st">'</span>)</code></pre></div>
<pre><code>## Warning in readLines(con): incomplete final line found on '/home/jialin/R/
## x86_64-suse-linux-gnu-library/3.4/TnT/htmlwidgets/trackWidget.yaml'</code></pre>
<div id="htmlwidget-520d6a2f430bb8af5255" style="width:100%;height:auto;" class="trackWidget html-widget"></div>
<script type="application/json" data-for="htmlwidget-520d6a2f430bb8af5255">{"x":{"tntdef":"\nvar data = [{start: 1, end: 1, height: 0.840188},\n    {start: 2, end: 2, height: 0.394383},\n    {start: 3, end: 3, height: 0.783099},\n    {start: 4, end: 4, height: 0.79844},\n    {start: 5, end: 5, height: 0.911647},\n    {start: 6, end: 6, height: 0.197551},\n    {start: 7, end: 7, height: 0.335223},\n    {start: 8, end: 8, height: 0.76823},\n    {start: 9, end: 9, height: 0.277775},\n    {start: 10, end: 10, height: 0.55397},\n    {start: 11, end: 11, height: 0.477397},\n    {start: 12, end: 12, height: 0.628871},\n    {start: 13, end: 13, height: 0.364784},\n    {start: 14, end: 14, height: 0.513401},\n    {start: 15, end: 15, height: 0.95223},\n    {start: 16, end: 16, height: 0.916195},\n    {start: 17, end: 17, height: 0.635712},\n    {start: 18, end: 18, height: 0.717297},\n    {start: 19, end: 19, height: 0.141603},\n    {start: 20, end: 20, height: 0.606969},\n    {start: 21, end: 21, height: 0.0163006},\n    {start: 22, end: 22, height: 0.242887},\n    {start: 23, end: 23, height: 0.137232},\n    {start: 24, end: 24, height: 0.804177},\n    {start: 25, end: 25, height: 0.156679},\n    {start: 26, end: 26, height: 0.400944},\n    {start: 27, end: 27, height: 0.12979},\n    {start: 28, end: 28, height: 0.108809},\n    {start: 29, end: 29, height: 0.998925},\n    {start: 30, end: 30, height: 0.218257},\n    {start: 31, end: 31, height: 0.512932},\n    {start: 32, end: 32, height: 0.839112},\n    {start: 33, end: 33, height: 0.61264},\n    {start: 34, end: 34, height: 0.296032},\n    {start: 35, end: 35, height: 0.637552},\n    {start: 36, end: 36, height: 0.524287},\n    {start: 37, end: 37, height: 0.493583},\n    {start: 38, end: 38, height: 0.972775},\n    {start: 39, end: 39, height: 0.292517},\n    {start: 40, end: 40, height: 0.771358},\n    {start: 41, end: 41, height: 0.526745},\n    {start: 42, end: 42, height: 0.769914},\n    {start: 43, end: 43, height: 0.400229},\n    {start: 44, end: 44, height: 0.891529},\n    {start: 45, end: 45, height: 0.283315},\n    {start: 46, end: 46, height: 0.352458},\n    {start: 47, end: 47, height: 0.807725},\n    {start: 48, end: 48, height: 0.919026},\n    {start: 49, end: 49, height: 0.0697553},\n    {start: 50, end: 50, height: 0.949327},\n    {start: 51, end: 51, height: 0.525995},\n    {start: 52, end: 52, height: 0.0860558},\n    {start: 53, end: 53, height: 0.192214},\n    {start: 54, end: 54, height: 0.663227},\n    {start: 55, end: 55, height: 0.890233},\n    {start: 56, end: 56, height: 0.348893},\n    {start: 57, end: 57, height: 0.0641713},\n    {start: 58, end: 58, height: 0.020023},\n    {start: 59, end: 59, height: 0.457702},\n    {start: 60, end: 60, height: 0.0630958},\n    {start: 61, end: 61, height: 0.23828},\n    {start: 62, end: 62, height: 0.970634},\n    {start: 63, end: 63, height: 0.902208},\n    {start: 64, end: 64, height: 0.85092},\n    {start: 65, end: 65, height: 0.266666},\n    {start: 66, end: 66, height: 0.53976},\n    {start: 67, end: 67, height: 0.375207},\n    {start: 68, end: 68, height: 0.760249},\n    {start: 69, end: 69, height: 0.512535},\n    {start: 70, end: 70, height: 0.667724},\n    {start: 71, end: 71, height: 0.531606},\n    {start: 72, end: 72, height: 0.0392803},\n    {start: 73, end: 73, height: 0.437638},\n    {start: 74, end: 74, height: 0.931835},\n    {start: 75, end: 75, height: 0.93081},\n    {start: 76, end: 76, height: 0.720952},\n    {start: 77, end: 77, height: 0.284293},\n    {start: 78, end: 78, height: 0.738534},\n    {start: 79, end: 79, height: 0.639979},\n    {start: 80, end: 80, height: 0.354049},\n    {start: 81, end: 81, height: 0.687861},\n    {start: 82, end: 82, height: 0.165974},\n    {start: 83, end: 83, height: 0.440105},\n    {start: 84, end: 84, height: 0.880075},\n    {start: 85, end: 85, height: 0.829201},\n    {start: 86, end: 86, height: 0.330337},\n    {start: 87, end: 87, height: 0.228968},\n    {start: 88, end: 88, height: 0.893372},\n    {start: 89, end: 89, height: 0.35036},\n    {start: 90, end: 90, height: 0.68667},\n    {start: 91, end: 91, height: 0.956468},\n    {start: 92, end: 92, height: 0.58864},\n    {start: 93, end: 93, height: 0.657304},\n    {start: 94, end: 94, height: 0.858676},\n    {start: 95, end: 95, height: 0.43956},\n    {start: 96, end: 96, height: 0.92397},\n    {start: 97, end: 97, height: 0.398437},\n    {start: 98, end: 98, height: 0.814767},\n    {start: 99, end: 99, height: 0.684219},\n    {start: 901, end: 901, height: 0.31299},\n    {start: 902, end: 902, height: 0.105576},\n    {start: 903, end: 903, height: 0.888433},\n    {start: 904, end: 904, height: 0.102233},\n    {start: 905, end: 905, height: 0.479777},\n    {start: 906, end: 906, height: 0.270321},\n    {start: 907, end: 907, height: 0.199724},\n    {start: 908, end: 908, height: 0.287736},\n    {start: 909, end: 909, height: 0.657643},\n    {start: 910, end: 910, height: 0.947001},\n    {start: 911, end: 911, height: 0.221918},\n    {start: 912, end: 912, height: 0.506915},\n    {start: 913, end: 913, height: 0.778463},\n    {start: 914, end: 914, height: 0.936349},\n    {start: 915, end: 915, height: 0.142119},\n    {start: 916, end: 916, height: 0.294601},\n    {start: 917, end: 917, height: 0.561007},\n    {start: 918, end: 918, height: 0.64452},\n    {start: 919, end: 919, height: 0.873414},\n    {start: 920, end: 920, height: 0.232848},\n    {start: 921, end: 921, height: 0.673996},\n    {start: 922, end: 922, height: 0.629359},\n    {start: 923, end: 923, height: 0.832555},\n    {start: 924, end: 924, height: 0.812997},\n    {start: 925, end: 925, height: 0.773301},\n    {start: 926, end: 926, height: 0.0284525},\n    {start: 927, end: 927, height: 0.590407},\n    {start: 928, end: 928, height: 0.617582},\n    {start: 929, end: 929, height: 0.763764},\n    {start: 930, end: 930, height: 0.774432},\n    {start: 931, end: 931, height: 0.284289},\n    {start: 932, end: 932, height: 0.0767534},\n    {start: 933, end: 933, height: 0.880009},\n    {start: 934, end: 934, height: 0.172722},\n    {start: 935, end: 935, height: 0.178987},\n    {start: 936, end: 936, height: 0.359786},\n    {start: 937, end: 937, height: 0.443043},\n    {start: 938, end: 938, height: 0.37871},\n    {start: 939, end: 939, height: 0.647522},\n    {start: 940, end: 940, height: 0.100686},\n    {start: 941, end: 941, height: 0.325711},\n    {start: 942, end: 942, height: 0.86944},\n    {start: 943, end: 943, height: 0.6076},\n    {start: 944, end: 944, height: 0.104174},\n    {start: 945, end: 945, height: 0.805789},\n    {start: 946, end: 946, height: 0.749719},\n    {start: 947, end: 947, height: 0.398775},\n    {start: 948, end: 948, height: 0.366796},\n    {start: 949, end: 949, height: 0.394239},\n    {start: 950, end: 950, height: 0.272189},\n    {start: 951, end: 951, height: 0.599644},\n    {start: 952, end: 952, height: 0.0682348},\n    {start: 953, end: 953, height: 0.901549},\n    {start: 954, end: 954, height: 0.432199},\n    {start: 955, end: 955, height: 0.881232},\n    {start: 956, end: 956, height: 0.67485},\n    {start: 957, end: 957, height: 0.460652},\n    {start: 958, end: 958, height: 0.471639},\n    {start: 959, end: 959, height: 0.292432},\n    {start: 960, end: 960, height: 0.224415},\n    {start: 961, end: 961, height: 0.246071},\n    {start: 962, end: 962, height: 0.576721},\n    {start: 963, end: 963, height: 0.301169},\n    {start: 964, end: 964, height: 0.12608},\n    {start: 965, end: 965, height: 0.749443},\n    {start: 966, end: 966, height: 0.480156},\n    {start: 967, end: 967, height: 0.485866},\n    {start: 968, end: 968, height: 0.192486},\n    {start: 969, end: 969, height: 0.858866},\n    {start: 970, end: 970, height: 0.133388},\n    {start: 971, end: 971, height: 0.293171},\n    {start: 972, end: 972, height: 0.184577},\n    {start: 973, end: 973, height: 0.00282779},\n    {start: 974, end: 974, height: 0.900772},\n    {start: 975, end: 975, height: 0.288752},\n    {start: 976, end: 976, height: 0.808617},\n    {start: 977, end: 977, height: 0.650491},\n    {start: 978, end: 978, height: 0.687527},\n    {start: 979, end: 979, height: 0.175413},\n    {start: 980, end: 980, height: 0.0447295},\n    {start: 981, end: 981, height: 0.959716},\n    {start: 982, end: 982, height: 0.775058},\n    {start: 983, end: 983, height: 0.112964},\n    {start: 984, end: 984, height: 0.861265},\n    {start: 985, end: 985, height: 0.207257},\n    {start: 986, end: 986, height: 0.994196},\n    {start: 987, end: 987, height: 0.536115},\n    {start: 988, end: 988, height: 0.667908},\n    {start: 989, end: 989, height: 0.465835},\n    {start: 990, end: 990, height: 0.828546},\n    {start: 991, end: 991, height: 0.892324},\n    {start: 992, end: 992, height: 0.711906},\n    {start: 993, end: 993, height: 0.405267},\n    {start: 994, end: 994, height: 0.193493},\n    {start: 995, end: 995, height: 0.837986},\n    {start: 996, end: 996, height: 0.154711},\n    {start: 997, end: 997, height: 0.673648},\n    {start: 998, end: 998, height: 0.323852},\n    {start: 999, end: 999, height: 0.347196},\n    {start: 1000, end: 1000, height: 0.532514}\n];\n\n// The coverage custom feature\nvar coverageFeature = tnt.board.track.feature()\n    .index(function(d) {\n        return d.start + \"-\" + d.end;\n    });\n\n// Create new elements\ncoverageFeature.create(function (el) {\n    var xScale = coverageFeature.scale();\n    var track = this;\n    var y = track.height();\n\n    var barScale = d3.scale.linear()\n        .domain([0, 1])\n        .range([0, y]);\n    var colorScale = d3.scale.linear()\n        .domain([0, 1])\n        .range([\"#5ba633\", \"#027be3\"]);\n\n    var g = el\n        .append(\"g\");\n\n    g.append(\"rect\")\n        .attr(\"x\", function (d) {\n            return xScale(d.start);\n        })\n        .attr(\"y\", function (d) {\n            return y - barScale(d.height);\n        })\n        .attr(\"width\", function (d) {\n            return xScale(d.end) - xScale(d.start);\n        })\n        .attr(\"height\", function (d) {\n            return barScale(d.height);\n        })\n        .style(\"fill\", function (d) {\n            return colorScale(d.height);\n        })\n});\n\ncoverageFeature.move(function (el) {\n    var xScale = coverageFeature.scale();\n\n    el.select(\"g\")\n        .select(\"rect\")\n        .attr(\"x\", function (d) {\n            return xScale(d.start);\n        })\n        .attr(\"width\", function (d) {\n            return xScale(d.end) - xScale(d.start);\n        })\n});\n\nfunction getHeightInStep(arr) {\n    // mean of the data in the subarray passed as argument\n    return d3.sum(arr, function (d) {\n        return d.height;\n    }) / arr.length;\n}\n\nfunction getRangedData(data, to, from, steps) {\n    var stepLength = (to - from) / steps;\n    var slice = [];\n    for (var i = from; i < to; i += stepLength) {\n        slice.push({\n            start: i,\n            end: (i + stepLength),\n            height: getHeightInStep(data.slice(i, (i + stepLength)))\n        });\n    }\n    return slice;\n}\n\n// The board\nvar myBoard = tnt.board()\n    .from(0)\n    .to(1000)\n    .max(1000)\n    .zoom_in(50)\n    .zoom_out(1000);\n\n// The location track\nvar location_track = tnt.board.track()\n    .height(20)\n    .color(\"white\")\n    .display(tnt.board.track.feature.axis()\n        .orientation(\"top\")\n    );\n\n// The ranges track\nvar ranges_track = tnt.board.track()\n    .label(\"coverage plot\")\n    .height(80)\n    .color(\"white\")\n    .data (tnt.board.track.data.sync()\n        .retriever (function (loc) {\n            // Return only the range on display\n            // Keep a constant same number of steps (bars) on view\n            return getRangedData(data, loc.to, loc.from, 50);\n        })\n    )\n    .display(coverageFeature);\n\n// Add the tracks and start\nmyBoard\n    .add_track(location_track)\n    .add_track(ranges_track);\n\nmyBoard;\n"},"evals":[],"jsHooks":[]}</script><p><br><br></p>
</div>
<div id="session-info" class="section level2">
<h2 class="hasAnchor">
<a href="#session-info" class="anchor"></a>Session Info</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sessionInfo</span>()</code></pre></div>
<pre><code>## R version 3.4.1 (2017-06-30)
## Platform: x86_64-suse-linux-gnu (64-bit)
## Running under: openSUSE Tumbleweed
## 
## Matrix products: default
## BLAS: /usr/lib64/R/lib/libRblas.so
## LAPACK: /usr/lib64/R/lib/libRlapack.so
## 
## locale:
##  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
##  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
##  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  base     
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_0.12.16           XVector_0.18.0         knitr_1.20            
##  [4] xml2_1.1.1             magrittr_1.5           roxygen2_6.0.1        
##  [7] zlibbioc_1.24.0        GenomicRanges_1.30.3   IRanges_2.12.0        
## [10] BiocGenerics_0.24.0    MASS_7.3-47            R6_2.2.2              
## [13] rlang_0.2.0.9001       GenomeInfoDb_1.14.0    stringr_1.3.0         
## [16] tools_3.4.1            parallel_3.4.1         Biobase_2.38.0        
## [19] htmltools_0.3.6        commonmark_1.4         yaml_2.1.19           
## [22] rprojroot_1.3-2        digest_0.6.15          assertthat_0.2.0      
## [25] pkgdown_1.0.0          crayon_1.3.4           GenomeInfoDbData_1.0.0
## [28] htmlwidgets_1.2        S4Vectors_0.16.0       bitops_1.0-6          
## [31] fs_1.2.2               RCurl_1.95-4.10        TnT_1.3.1             
## [34] memoise_1.1.0          evaluate_0.10.1        rmarkdown_1.9         
## [37] stringi_1.2.2          compiler_3.4.1         methods_3.4.1         
## [40] desc_1.2.0             backports_1.1.2-9000   stats4_3.4.1          
## [43] jsonlite_1.5</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#coverage-feature">Coverage Feature</a></li>
      <li><a href="#section">2</a></li>
      <li><a href="#session-info">Session Info</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jialin Ma, Miguel Pignatelli, Toby Hocking.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
